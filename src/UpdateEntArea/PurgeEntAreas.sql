DELETE CommandGroup_Command_CommandParameter FROM 
CommandGroup_Command_CommandParameter
JOIN CommandGroup_Command ON PK_CommandGroup_Command=FK_CommandGroup_Command
JOIN CommandGroup ON PK_CommandGroup=CommandGroup_Command.FK_CommandGroup
JOIN CommandGroup_EntertainArea ON PK_CommandGroup=CommandGroup_EntertainArea.FK_CommandGroup
JOIN EntertainArea ON FK_EntertainArea=PK_EntertainArea
LEFT JOIN Room ON FK_Room=PK_Room
WHERE (ManuallyConfigureEA is null OR ManuallyConfigureEA=0) AND AutoGenerated=1;

DELETE CommandGroup_Command
FROM CommandGroup_Command 
JOIN CommandGroup ON PK_CommandGroup=CommandGroup_Command.FK_CommandGroup
JOIN CommandGroup_EntertainArea ON PK_CommandGroup=CommandGroup_EntertainArea.FK_CommandGroup
JOIN EntertainArea ON FK_EntertainArea=PK_EntertainArea
LEFT JOIN Room ON FK_Room=PK_Room
WHERE (ManuallyConfigureEA is null OR ManuallyConfigureEA=0) AND AutoGenerated=1;

DELETE CommandGroup
FROM CommandGroup 
JOIN CommandGroup_EntertainArea ON PK_CommandGroup=CommandGroup_EntertainArea.FK_CommandGroup
JOIN EntertainArea ON FK_EntertainArea=PK_EntertainArea
LEFT JOIN Room ON FK_Room=PK_Room
WHERE (ManuallyConfigureEA is null OR ManuallyConfigureEA=0) AND AutoGenerated=1;

DELETE CommandGroup_EntertainArea
FROM CommandGroup_EntertainArea 
LEFT JOIN EntertainArea ON FK_EntertainArea=PK_EntertainArea
WHERE PK_EntertainArea IS NULL;

DELETE CommandGroup_EntertainArea
FROM CommandGroup_EntertainArea 
LEFT JOIN CommandGroup ON FK_CommandGroup=PK_CommandGroup
WHERE PK_CommandGroup IS NULL;

DELETE CommandGroup_Room
FROM CommandGroup_Room 
LEFT JOIN Room ON FK_Room=PK_Room
WHERE PK_Room IS NULL;

DELETE CommandGroup_Room
FROM CommandGroup_Room 
LEFT JOIN CommandGroup ON FK_CommandGroup=PK_CommandGroup
WHERE PK_CommandGroup IS NULL;

DELETE CommandGroup_Command_CommandParameter FROM 
CommandGroup_Command_CommandParameter
JOIN CommandGroup_Command ON PK_CommandGroup_Command=FK_CommandGroup_Command
JOIN CommandGroup ON PK_CommandGroup=CommandGroup_Command.FK_CommandGroup
WHERE AutoGenerated=1;


DELETE CommandGroup_Command
FROM CommandGroup_Command
JOIN CommandGroup ON PK_CommandGroup=CommandGroup_Command.FK_CommandGroup
WHERE AutoGenerated=1;

DELETE FROM CommandGroup
WHERE AutoGenerated=1;


